{"version":3,"sources":["webpack:///./public/app/core/components/OrgActionBar/OrgActionBar.tsx","webpack:///./public/app/core/components/FilterInput/FilterInput.tsx","webpack:///./public/app/features/plugins/PluginListItem.tsx","webpack:///./public/app/features/plugins/PluginList.tsx","webpack:///./public/app/features/plugins/PluginListPage.tsx","webpack:///./public/app/features/plugins/state/selectors.ts"],"names":["OrgActionBar","this","props","searchQuery","layoutMode","onSetLayoutMode","linkButton","setSearchQuery","target","linkProps","href","className","labelClassName","inputClassName","value","onChange","placeholder","mode","onLayoutModeChanged","title","PureComponent","FilterInput","forwardRef","ref","type","unEscapeStringFromRegex","event","escapeStringForRegex","PluginListItem","plugin","id","hasUpdate","bs-tooltip","src","info","logos","small","name","author","PluginList","plugins","listStyle","classNames","LayoutModes","Grid","List","map","index","key","PluginListPage","fetchPlugins","loadPlugins","hasFetched","navModel","setPluginsLayoutMode","setPluginsSearchQuery","Contents","isLoading","query","mapDispatchToProps","hot","module","connect","state","getNavModel","navIndex","getPlugins","getLayoutMode","getPluginsSearchQuery","regex","RegExp","filter","item","test","description"],"mappings":"ywCAaqBA,E,6WACV,MACkFC,KAAKC,MAAtFC,EADD,EACCA,YAAaC,EADd,EACcA,WAAYC,EAD1B,EAC0BA,gBAAiBC,EAD3C,EAC2CA,WAAYC,EADvD,EACuDA,eAAgBC,EADvE,EACuEA,OACxEC,EAAY,CAAEC,KAAMJ,EAAWI,MAMrC,OAJIF,IACDC,EAAkBD,OAASA,GAI5B,yBAAKG,UAAU,mBACb,yBAAKA,UAAU,yBACb,kBAAC,IAAD,CACEC,eAAe,0BACfC,eAAe,yBACfC,MAAOX,EACPY,SAAUR,EACVS,YAAa,2BAEf,kBAAC,IAAD,CAAgBC,KAAMb,EAAYc,oBAAqB,SAACD,GAAD,OAAsBZ,EAAgBY,OAE/F,yBAAKN,UAAU,4BACf,yBAAGA,UAAU,mBAAsBF,GAChCH,EAAWa,a,8BAvBoBC,kB,kCCb1C,uEAWaC,EAAcC,sBAAoC,SAACpB,EAAOqB,GAAR,OAC7D,2BAAOZ,UAAWT,EAAMU,gBACtB,2BACEW,IAAKA,EACLC,KAAK,OACLb,UAAWT,EAAMW,eACjBC,MAAOW,kCAAwBvB,EAAMY,OACrCC,SAAU,SAAAW,GAAK,OAAIxB,EAAMa,SAASY,+BAAqBD,EAAMlB,OAAOM,SACpEE,YAAad,EAAMc,YAAcd,EAAMc,YAAc,OAEvD,uBAAGL,UAAU,yC,gFCcFiB,EA5BmB,SAAA1B,GAAS,IACjC2B,EAAW3B,EAAX2B,OAER,OACE,wBAAIlB,UAAU,qBACZ,uBAAGA,UAAU,YAAYD,KAAI,kBAAamB,EAAOC,GAApB,MAC3B,yBAAKnB,UAAU,oBACb,yBAAKA,UAAU,kBAAkBkB,EAAOL,MACvCK,EAAOE,WACN,yBAAKpB,UAAU,oBACb,0BAAMqB,aAAW,wBAAjB,uBAIN,yBAAKrB,UAAU,kBACb,4BAAQA,UAAU,oBAChB,yBAAKsB,IAAKJ,EAAOK,KAAKC,MAAMC,SAE9B,yBAAKzB,UAAU,qBACb,yBAAKA,UAAU,kBAAkBkB,EAAOQ,MACxC,yBAAK1B,UAAU,sBAAf,aAA2CkB,EAAOK,KAAKI,OAAOD,Y,YCI3DE,IApBe,SAAArC,GAAS,IAC7BsC,EAAwBtC,EAAxBsC,QAASpC,EAAeF,EAAfE,WAEXqC,EAAYC,IAAW,CAC3B,gBAAgB,EAChB,wBAAyBtC,IAAeuC,IAAYC,KACpD,wBAAyBxC,IAAeuC,IAAYE,OAGtD,OACE,6BAASlC,UAAW8B,GAClB,wBAAI9B,UAAU,aACX6B,EAAQM,KAAI,SAACjB,EAAQkB,GACpB,OAAO,kBAAC,EAAD,CAAgBlB,OAAQA,EAAQmB,IAAG,UAAKnB,EAAOQ,KAAZ,YAAoBU,Y,uuCCCjE,IAAME,EAAb,6E,YAAA,S,kOAAA,M,EAAA,G,EAAA,2CAEIhD,KAAKiD,iBAFT,2B,EAAA,sIAMUjD,KAAKC,MAAMiD,cANrB,iD,8KAAA,4EASW,MASHlD,KAAKC,MAPPkD,EAFK,EAELA,WACAC,EAHK,EAGLA,SACAb,EAJK,EAILA,QACApC,EALK,EAKLA,WACAkD,EANK,EAMLA,qBACAC,EAPK,EAOLA,sBACApD,EARK,EAQLA,YAQF,OACE,kBAAC,IAAD,CAAMkD,SAAUA,GACd,kBAAC,IAAKG,SAAN,CAAeC,WAAYL,GACzB,oCACE,kBAAC,IAAD,CACEjD,YAAaA,EACbC,WAAYA,EACZC,gBAAiB,SAAAY,GAAI,OAAIqC,EAAqBrC,IAC9CV,eAAgB,SAAAmD,GAAK,OAAIH,EAAsBG,IAC/CpD,WAdS,CACjBI,KAAM,6DACNS,MAAO,wBAcAiC,GAAcZ,GAAWA,GAAW,kBAAC,IAAD,CAAYA,QAASA,EAASpC,WAAYA,Y,2BApC3F,GAAoCgB,iBAsDpC,IAAMuC,EAAqB,CACzBR,gBACAG,yBACAC,2BAGaK,wBAAIC,EAAJD,CAAYE,mBAhB3B,SAAyBC,GACvB,MAAO,CACLV,SAAUW,YAAYD,EAAME,SAAU,WACtCzB,QAAS0B,YAAWH,EAAMvB,SAC1BpC,WAAY+D,YAAcJ,EAAMvB,SAChCrC,YAAaiE,YAAsBL,EAAMvB,SACzCY,WAAYW,EAAMvB,QAAQY,cAUsBO,EAAzBG,CAA6Cb,K,2DCnFxE,sGAAO,IAAMiB,EAAa,SAACH,GACzB,IAAMM,EAAQ,IAAIC,OAAOP,EAAM5D,YAAa,KAE5C,OAAO4D,EAAMvB,QAAQ+B,QAAO,SAAAC,GAC1B,OAAOH,EAAMI,KAAKD,EAAKnC,OAASgC,EAAMI,KAAKD,EAAKtC,KAAKI,OAAOD,OAASgC,EAAMI,KAAKD,EAAKtC,KAAKwC,iBAIjFN,EAAwB,SAACL,GAAD,OAAyBA,EAAM5D,aACvDgE,EAAgB,SAACJ,GAAD,OAAyBA,EAAM3D","file":"PluginListPage.fc25e2ef18cf58c0ed79.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport LayoutSelector, { LayoutMode } from '../LayoutSelector/LayoutSelector';\nimport { FilterInput } from '../FilterInput/FilterInput';\n\nexport interface Props {\n  searchQuery: string;\n  layoutMode?: LayoutMode;\n  onSetLayoutMode?: (mode: LayoutMode) => {};\n  setSearchQuery: (value: string) => {};\n  linkButton: { href: string; title: string };\n  target?: string;\n}\n\nexport default class OrgActionBar extends PureComponent<Props> {\n  render() {\n    const { searchQuery, layoutMode, onSetLayoutMode, linkButton, setSearchQuery, target } = this.props;\n    const linkProps = { href: linkButton.href };\n\n    if (target) {\n      (linkProps as any).target = target;\n    }\n\n    return (\n      <div className=\"page-action-bar\">\n        <div className=\"gf-form gf-form--grow\">\n          <FilterInput\n            labelClassName=\"gf-form--has-input-icon\"\n            inputClassName=\"gf-form-input width-20\"\n            value={searchQuery}\n            onChange={setSearchQuery}\n            placeholder={'Filter by name or type'}\n          />\n          <LayoutSelector mode={layoutMode} onLayoutModeChanged={(mode: LayoutMode) => onSetLayoutMode(mode)} />\n        </div>\n        <div className=\"page-action-bar__spacer\" />\n        <a className=\"btn btn-primary\" {...linkProps}>\n          {linkButton.title}\n        </a>\n      </div>\n    );\n  }\n}\n","import React, { forwardRef } from 'react';\nimport { escapeStringForRegex, unEscapeStringFromRegex } from '@grafana/data';\n\nexport interface Props {\n  value: string | undefined;\n  placeholder?: string;\n  labelClassName?: string;\n  inputClassName?: string;\n  onChange: (value: string) => void;\n}\n\nexport const FilterInput = forwardRef<HTMLInputElement, Props>((props, ref) => (\n  <label className={props.labelClassName}>\n    <input\n      ref={ref}\n      type=\"text\"\n      className={props.inputClassName}\n      value={unEscapeStringFromRegex(props.value)}\n      onChange={event => props.onChange(escapeStringForRegex(event.target.value))}\n      placeholder={props.placeholder ? props.placeholder : null}\n    />\n    <i className=\"gf-form-input-icon fa fa-search\" />\n  </label>\n));\n","import React, { FC } from 'react';\nimport { PluginMeta } from '@grafana/data';\n\ninterface Props {\n  plugin: PluginMeta;\n}\n\nconst PluginListItem: FC<Props> = props => {\n  const { plugin } = props;\n\n  return (\n    <li className=\"card-item-wrapper\">\n      <a className=\"card-item\" href={`plugins/${plugin.id}/`}>\n        <div className=\"card-item-header\">\n          <div className=\"card-item-type\">{plugin.type}</div>\n          {plugin.hasUpdate && (\n            <div className=\"card-item-notice\">\n              <span bs-tooltip=\"plugin.latestVersion\">Update available!</span>\n            </div>\n          )}\n        </div>\n        <div className=\"card-item-body\">\n          <figure className=\"card-item-figure\">\n            <img src={plugin.info.logos.small} />\n          </figure>\n          <div className=\"card-item-details\">\n            <div className=\"card-item-name\">{plugin.name}</div>\n            <div className=\"card-item-sub-name\">{`By ${plugin.info.author.name}`}</div>\n          </div>\n        </div>\n      </a>\n    </li>\n  );\n};\n\nexport default PluginListItem;\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport PluginListItem from './PluginListItem';\nimport { PluginMeta } from '@grafana/data';\nimport { LayoutMode, LayoutModes } from '../../core/components/LayoutSelector/LayoutSelector';\n\ninterface Props {\n  plugins: PluginMeta[];\n  layoutMode: LayoutMode;\n}\n\nconst PluginList: FC<Props> = props => {\n  const { plugins, layoutMode } = props;\n\n  const listStyle = classNames({\n    'card-section': true,\n    'card-list-layout-grid': layoutMode === LayoutModes.Grid,\n    'card-list-layout-list': layoutMode === LayoutModes.List,\n  });\n\n  return (\n    <section className={listStyle}>\n      <ol className=\"card-list\">\n        {plugins.map((plugin, index) => {\n          return <PluginListItem plugin={plugin} key={`${plugin.name}-${index}`} />;\n        })}\n      </ol>\n    </section>\n  );\n};\n\nexport default PluginList;\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport Page from 'app/core/components/Page/Page';\nimport OrgActionBar from 'app/core/components/OrgActionBar/OrgActionBar';\nimport PluginList from './PluginList';\nimport { loadPlugins } from './state/actions';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { getLayoutMode, getPlugins, getPluginsSearchQuery } from './state/selectors';\nimport { LayoutMode } from 'app/core/components/LayoutSelector/LayoutSelector';\nimport { NavModel, PluginMeta } from '@grafana/data';\nimport { StoreState } from 'app/types';\nimport { setPluginsLayoutMode, setPluginsSearchQuery } from './state/reducers';\n\nexport interface Props {\n  navModel: NavModel;\n  plugins: PluginMeta[];\n  layoutMode: LayoutMode;\n  searchQuery: string;\n  hasFetched: boolean;\n  loadPlugins: typeof loadPlugins;\n  setPluginsLayoutMode: typeof setPluginsLayoutMode;\n  setPluginsSearchQuery: typeof setPluginsSearchQuery;\n}\n\nexport class PluginListPage extends PureComponent<Props> {\n  componentDidMount() {\n    this.fetchPlugins();\n  }\n\n  async fetchPlugins() {\n    await this.props.loadPlugins();\n  }\n\n  render() {\n    const {\n      hasFetched,\n      navModel,\n      plugins,\n      layoutMode,\n      setPluginsLayoutMode,\n      setPluginsSearchQuery,\n      searchQuery,\n    } = this.props;\n\n    const linkButton = {\n      href: 'https://grafana.com/plugins?utm_source=grafana_plugin_list',\n      title: '到Grafana.com查找更多插件',\n    };\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents isLoading={!hasFetched}>\n          <>\n            <OrgActionBar\n              searchQuery={searchQuery}\n              layoutMode={layoutMode}\n              onSetLayoutMode={mode => setPluginsLayoutMode(mode)}\n              setSearchQuery={query => setPluginsSearchQuery(query)}\n              linkButton={linkButton}\n            />\n            {hasFetched && plugins && plugins && <PluginList plugins={plugins} layoutMode={layoutMode} />}\n          </>\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState) {\n  return {\n    navModel: getNavModel(state.navIndex, 'plugins'),\n    plugins: getPlugins(state.plugins),\n    layoutMode: getLayoutMode(state.plugins),\n    searchQuery: getPluginsSearchQuery(state.plugins),\n    hasFetched: state.plugins.hasFetched,\n  };\n}\n\nconst mapDispatchToProps = {\n  loadPlugins,\n  setPluginsLayoutMode,\n  setPluginsSearchQuery,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(PluginListPage));\n","import { PluginsState } from 'app/types/plugins';\n\nexport const getPlugins = (state: PluginsState) => {\n  const regex = new RegExp(state.searchQuery, 'i');\n\n  return state.plugins.filter(item => {\n    return regex.test(item.name) || regex.test(item.info.author.name) || regex.test(item.info.description);\n  });\n};\n\nexport const getPluginsSearchQuery = (state: PluginsState) => state.searchQuery;\nexport const getLayoutMode = (state: PluginsState) => state.layoutMode;\n"],"sourceRoot":""}