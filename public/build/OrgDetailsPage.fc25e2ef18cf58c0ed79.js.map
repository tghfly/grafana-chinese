{"version":3,"sources":["webpack:///./public/app/features/org/OrgProfile.tsx","webpack:///./public/app/features/org/OrgDetailsPage.tsx","webpack:///./public/app/features/org/state/actions.ts"],"names":["OrgProfile","onSubmit","onOrgNameChange","orgName","className","name","event","preventDefault","type","onChange","target","value","OrgDetailsPage","props","setOrganizationName","onUpdateOrganization","updateOrganization","this","loadOrganization","navModel","organization","isLoading","Object","keys","length","Contents","resourceUri","PureComponent","mapDispatchToProps","hot","module","connect","state","getNavModel","navIndex","dispatch","getBackendSrv","get","organizationResponse","organizationLoaded","getStore","put"],"mappings":"8FAAA,qCA0CeA,IAjCe,SAAC,GAA2C,IAAzCC,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,gBAAiBC,EAAc,EAAdA,QAC1D,OACE,6BACE,wBAAIC,UAAU,oBAAd,QACA,0BACEC,KAAK,UACLD,UAAU,gBACVH,SAAU,SAAAK,GACRA,EAAMC,iBACNN,MAGF,yBAAKG,UAAU,kBACb,yBAAKA,UAAU,wBACb,0BAAMA,UAAU,iBAAhB,QACA,kBAAC,QAAD,CACEA,UAAU,gBACVI,KAAK,OACLC,SAAU,SAACH,GAAD,OAA0CJ,EAAgBI,EAAMI,OAAOC,QACjFA,MAAOR,MAIb,yBAAKC,UAAU,sBACb,4BAAQI,KAAK,SAASJ,UAAU,mBAAhC,W,2tCCZH,IAAMQ,EAAb,6KAKEV,gBAAkB,SAACG,GACjB,EAAKQ,MAAMC,oBAAoBT,IANnC,EASEU,qBAAuB,WACrB,EAAKF,MAAMG,sBAVf,E,YAAA,S,kOAAA,M,EAAA,G,EAAA,iC,EAAA,sIAEUC,KAAKJ,MAAMK,mBAFrB,iD,8KAAA,4EAaW,aAC4BD,KAAKJ,MAAhCM,EADD,EACCA,SAAUC,EADX,EACWA,aACZC,EAAiD,IAArCC,OAAOC,KAAKH,GAAcI,OAE5C,OACE,kBAAC,IAAD,CAAML,SAAUA,GACd,kBAAC,IAAKM,SAAN,CAAeJ,UAAWA,IACtBA,GACA,6BACE,kBAAC,IAAD,CACEnB,gBAAiB,SAAAG,GAAI,OAAI,EAAKH,gBAAgBG,IAC9CJ,SAAUgB,KAAKF,qBACfZ,QAASiB,EAAaf,OAExB,kBAAC,IAAD,CAAmBqB,YAAY,gB,2BA3B7C,GAAoCC,iBA2CpC,IAAMC,EAAqB,CACzBV,qBACAJ,wBACAE,wBAGaa,wBAAIC,EAAJD,CAAYE,mBAb3B,SAAyBC,GACvB,MAAO,CACLb,SAAUc,YAAYD,EAAME,SAAU,gBACtCd,aAAcY,EAAMZ,aAAaA,gBAUeQ,EAAzBG,CAA6CnB,K,udClEjE,SAASM,IACd,mDAAO,WAAMiB,GAAN,sGAC8BC,0BAAgBC,IAAI,YADlD,cACCC,EADD,OAELH,EAASI,YAAmBD,IAFvB,kBAIEA,GAJF,2CAAP,sDAQK,SAAStB,IACd,mDAAO,WAAOmB,EAAUK,GAAjB,6FACCpB,EAAeoB,IAAWpB,aAAaA,aADxC,SAGCgB,0BAAgBK,IAAI,WAAY,CAAEpC,KAAMe,EAAaf,OAHtD,OAKL8B,EAASjB,KALJ,2CAAP","file":"OrgDetailsPage.fc25e2ef18cf58c0ed79.js","sourcesContent":["import React, { ChangeEvent, FC } from 'react';\nimport { Input } from '@grafana/ui';\n\nexport interface Props {\n  orgName: string;\n  onSubmit: () => void;\n  onOrgNameChange: (orgName: string) => void;\n}\n\nconst OrgProfile: FC<Props> = ({ onSubmit, onOrgNameChange, orgName }) => {\n  return (\n    <div>\n      <h3 className=\"page-sub-heading\">组织概述</h3>\n      <form\n        name=\"orgForm\"\n        className=\"gf-form-group\"\n        onSubmit={event => {\n          event.preventDefault();\n          onSubmit();\n        }}\n      >\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form max-width-28\">\n            <span className=\"gf-form-label\">组织名称</span>\n            <Input\n              className=\"gf-form-input\"\n              type=\"text\"\n              onChange={(event: ChangeEvent<HTMLInputElement>) => onOrgNameChange(event.target.value)}\n              value={orgName}\n            />\n          </div>\n        </div>\n        <div className=\"gf-form-button-row\">\n          <button type=\"submit\" className=\"btn btn-primary\">\n            保存\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default OrgProfile;\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { NavModel } from '@grafana/data';\n\nimport Page from 'app/core/components/Page/Page';\nimport OrgProfile from './OrgProfile';\nimport SharedPreferences from 'app/core/components/SharedPreferences/SharedPreferences';\nimport { loadOrganization, updateOrganization } from './state/actions';\nimport { Organization, StoreState } from 'app/types';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { setOrganizationName } from './state/reducers';\n\nexport interface Props {\n  navModel: NavModel;\n  organization: Organization;\n  loadOrganization: typeof loadOrganization;\n  setOrganizationName: typeof setOrganizationName;\n  updateOrganization: typeof updateOrganization;\n}\n\nexport class OrgDetailsPage extends PureComponent<Props> {\n  async componentDidMount() {\n    await this.props.loadOrganization();\n  }\n\n  onOrgNameChange = (name: string) => {\n    this.props.setOrganizationName(name);\n  };\n\n  onUpdateOrganization = () => {\n    this.props.updateOrganization();\n  };\n\n  render() {\n    const { navModel, organization } = this.props;\n    const isLoading = Object.keys(organization).length === 0;\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents isLoading={isLoading}>\n          {!isLoading && (\n            <div>\n              <OrgProfile\n                onOrgNameChange={name => this.onOrgNameChange(name)}\n                onSubmit={this.onUpdateOrganization}\n                orgName={organization.name}\n              />\n              <SharedPreferences resourceUri=\"org\" />\n            </div>\n          )}\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState) {\n  return {\n    navModel: getNavModel(state.navIndex, 'org-settings'),\n    organization: state.organization.organization,\n  };\n}\n\nconst mapDispatchToProps = {\n  loadOrganization,\n  setOrganizationName,\n  updateOrganization,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(OrgDetailsPage));\n","import { ThunkResult } from 'app/types';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { organizationLoaded } from './reducers';\n\nexport function loadOrganization(): ThunkResult<any> {\n  return async dispatch => {\n    const organizationResponse = await getBackendSrv().get('/api/org');\n    dispatch(organizationLoaded(organizationResponse));\n\n    return organizationResponse;\n  };\n}\n\nexport function updateOrganization(): ThunkResult<any> {\n  return async (dispatch, getStore) => {\n    const organization = getStore().organization.organization;\n\n    await getBackendSrv().put('/api/org', { name: organization.name });\n\n    dispatch(loadOrganization());\n  };\n}\n"],"sourceRoot":""}